
<div class="bx-persons-cover">
    <a class="bx-persons-cover-image bx-def-round-corners bx-def-border" href="__cover_href__" onclick="bx_persons_popup('bx-persons-popup-cover', '__cover_url__')" style="background-image:url(__cover_url__)">&nbsp;</a>
    <div class="bx-persons-cover-info bx-def-unit bx-def-padding">
        <a href="__picture_href__" onclick="bx_persons_popup('bx-persons-popup-picture', '__picture_url__')"><img class="bx-def-margin-right bx-def-ava bx-def-ava-size" src="__picture_avatar_url__" /></a>
        <h1 class="bx-def-unit-info bx-def-margin-sec-bottom bx-def-margin-sec-top bx-def-font-contrasted">__title__</h1>
    </div>
</div>

__cover_popup__
__picture_popup__

<script>
    function bx_persons_popup (sId, sUrl) {
        var k = .95,
            w = $(window).width(),
            h = $(window).height(),
            eImg = new Image();

        if (!$('#' + sId + ' .bx-persons-popup-image').size())
            return;

        eImg.src = sUrl;

        $(eImg).on('load', function () {

            // fit image into the browser window
            if ((w * k - eImg.width) < (h * k - eImg.height)) {
                $('#' + sId + ' .bx-persons-popup-image').css({
                    width: '' + (eImg.width > w * k ? parseInt(w * k) : eImg.width) + 'px',
                    height: 'auto'
                });
            } else {
                $('#' + sId + ' .bx-persons-popup-image').css({
                    width: 'auto',
                    height: '' + (eImg.height > h * k ? parseInt(h * k) : eImg.height) + 'px',
                });
            }

            // show popup
            $('#' + sId).dolPopup();

            // hide popup upon clicking/tapping on the image
            var fCallback = function (e) {
                e.stopPropagation();
                $('#' + sId).dolPopupHide();
            };
            $('#' + sId + ' .bx-persons-popup-image').on({
                click: fCallback,
                touchend: fCallback
            });

        });
    }
</script>
